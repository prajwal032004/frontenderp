{% extends "intern_base.html" %} {% block title %}My Submissions{% endblock %}
{% block page_title %}Submission History{% endblock %} {% block content %}
<div
  class="glass-panel"
  style="border-radius: 24px; padding: 0; overflow: hidden"
>
  <div style="overflow-x: auto">
    <table style="width: 100%; border-collapse: collapse; min-width: 600px">
      <thead>
        <tr style="background: rgba(0, 0, 0, 0.2); text-align: left">
          <th
            style="
              padding: 1.5rem;
              color: var(--text-muted);
              font-weight: 600;
              font-size: 0.9rem;
            "
          >
            Task
          </th>
          <th
            style="
              padding: 1.5rem;
              color: var(--text-muted);
              font-weight: 600;
              font-size: 0.9rem;
            "
          >
            Date
          </th>
          <th
            style="
              padding: 1.5rem;
              color: var(--text-muted);
              font-weight: 600;
              font-size: 0.9rem;
            "
          >
            File
          </th>
          <th
            style="
              padding: 1.5rem;
              color: var(--text-muted);
              font-weight: 600;
              font-size: 0.9rem;
            "
          >
            Status
          </th>
          <th
            style="
              padding: 1.5rem;
              color: var(--text-muted);
              font-weight: 600;
              font-size: 0.9rem;
            "
          >
            Feedback
          </th>
        </tr>
      </thead>
      <tbody>
        {% if submissions %} {% for sub in submissions %}
        <tr
          style="border-bottom: 1px solid var(--glass-border); transition: 0.2s"
          onmouseover="this.style.background = 'rgba(255,255,255,0.03)'"
          onmouseout="this.style.background = 'transparent'"
        >
          <td style="padding: 1.5rem">
            <div style="font-weight: 600">{{ sub.task_title }}</div>
            <div style="font-size: 0.8rem; color: var(--text-muted)">
              ID: #{{ sub.id }}
            </div>
          </td>
          <td style="padding: 1.5rem; font-size: 0.9rem">
            {{ sub.submitted_at }}
          </td>
          <td style="padding: 1.5rem">
            {% if sub.file_url %}
            <a
              href="{{ sub.file_url }}"
              target="_blank"
              style="
                color: var(--primary);
                text-decoration: none;
                display: flex;
                align-items: center;
                gap: 5px;
              "
            >
              <i class="fas fa-paperclip"></i> View
            </a>
            {% else %}
            <span style="color: var(--text-muted)">-</span>
            {% endif %}
          </td>
          <td style="padding: 1.5rem">
            {% if sub.status == 'APPROVED' %}
            <span
              style="
                background: rgba(16, 185, 129, 0.1);
                color: var(--success);
                padding: 5px 12px;
                border-radius: 20px;
                font-size: 0.8rem;
                font-weight: 600;
              "
              >Approved</span
            >
            {% elif sub.status == 'REJECTED' %}
            <span
              style="
                background: rgba(239, 68, 68, 0.1);
                color: var(--danger);
                padding: 5px 12px;
                border-radius: 20px;
                font-size: 0.8rem;
                font-weight: 600;
              "
              >Rejected</span
            >
            {% else %}
            <span
              style="
                background: rgba(245, 158, 11, 0.1);
                color: #f59e0b;
                padding: 5px 12px;
                border-radius: 20px;
                font-size: 0.8rem;
                font-weight: 600;
              "
              >Pending</span
            >
            {% endif %}
          </td>
          <td style="padding: 1.5rem; max-width: 250px">
            {% if sub.feedback %}
            <div
              style="
                font-size: 0.85rem;
                color: var(--text-main);
                background: rgba(0, 0, 0, 0.2);
                padding: 8px;
                border-radius: 8px;
              "
            >
              "{{ sub.feedback }}" {% if sub.grade %}<br /><strong
                style="color: var(--primary)"
                >Grade: {{ sub.grade }}</strong
              >{% endif %}
            </div>
            {% else %}
            <span style="color: var(--text-muted); font-size: 0.8rem"
              >Awaiting Review</span
            >
            {% endif %}
          </td>
        </tr>
        {% endfor %} {% else %}
        <tr>
          <td
            colspan="5"
            style="padding: 3rem; text-align: center; color: var(--text-muted)"
          >
            No submissions yet.
            <a
              href="{{ url_for('intern_submit') }}"
              style="color: var(--primary)"
              >Submit work now</a
            >.
          </td>
        </tr>
        {% endif %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
