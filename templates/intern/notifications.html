{% extends "intern/base.html" %} {% block title %}Notifications{% endblock %} {%
block page_title %}Notifications{% endblock %} {% block extra_head %}
<style>
  .notif-wrapper {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      max-width: 800px;
      margin: 0 auto;
  }

  /* Changed from div to <a> tag behavior */
  .notif-card {
      padding: 1.25rem;
      border-radius: 16px;
      display: flex;
      gap: 1.25rem;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      text-decoration: none; /* Remove underline */
      color: inherit;
      opacity: 0;
      animation: cardAppear 0.4s ease forwards;
  }

  .notif-card:hover {
      transform: translateX(10px);
      background: var(--glass-highlight);
      border-color: var(--primary);
      box-shadow: 0 10px 30px -10px rgba(0, 0, 0, 0.5);
  }

  .notif-card:active {
      transform: scale(0.98) translateX(5px);
  }

  /* Unread Indicator */
  .notif-card.unread {
      border-left: 4px solid var(--primary);
      background: rgba(99, 102, 241, 0.03);
  }

  .notif-card.unread::after {
      content: '';
      position: absolute;
      top: 20px;
      right: 20px;
      width: 10px;
      height: 10px;
      background: var(--primary);
      border-radius: 50%;
      box-shadow: 0 0 15px var(--primary-glow);
  }

  .notif-icon-box {
      width: 52px;
      height: 52px;
      border-radius: 14px;
      background: rgba(99, 102, 241, 0.1);
      color: var(--primary);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.3rem;
      flex-shrink: 0;
      border: 1px solid var(--glass-border);
  }

  .notif-content { flex: 1; }

  .notif-title {
      font-size: 1.1rem;
      font-weight: 700;
      color: var(--text-main);
      margin-bottom: 4px;
  }

  .notif-message {
      font-size: 0.95rem;
      color: var(--text-muted);
      line-height: 1.5;
      margin-bottom: 10px;
  }

  .notif-time {
      font-size: 0.8rem;
      color: var(--text-muted);
      display: flex;
      align-items: center;
      gap: 6px;
      opacity: 0.8;
  }

  /* Empty State */
  .empty-notif {
      text-align: center;
      padding: 5rem 2rem;
      border: 1px dashed var(--glass-border);
  }

  @keyframes cardAppear {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
  }

  /* Custom Cursor Consistency */
  .notif-card {
      cursor: url("data:image/svg+xml;utf8,<svg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'><path d='M3 3L10.07 19.97L12.9 12.9L19.97 10.07L3 3Z' fill='%236366f1' stroke='%23ffffff' stroke-width='1.5' stroke-linejoin='round'/><circle cx='3' cy='3' r='3' fill='%236366f1' fill-opacity='0.5'/></svg>") 3 3, pointer !important;
  }

  {% for i in range(20) %}
  .notif-card:nth-child({{ i }}) { animation-delay: {{ i * 0.05 }}s; }
  {% endfor %}
</style>
{% endblock %} {% block content %}
<div class="notif-wrapper">
  {% if notifications %} {% for notification in notifications %} {# Logic to
  determine the target page based on content #} {% set title_lower =
  notification.title|lower %} {% if 'task' in title_lower %} {% set target_url =
  url_for('intern_tasks') %} {% set icon = 'fa-tasks' %} {% elif 'message' in
  title_lower or 'chat' in title_lower %} {% set target_url =
  url_for('intern_messages') %} {% set icon = 'fa-envelope' %} {% elif
  'attendance' in title_lower or 'present' in title_lower %} {% set target_url =
  url_for('intern_attendance') %} {% set icon = 'fa-fingerprint' %} {% elif
  'leave' in title_lower %} {% set target_url = url_for('intern_leave') %} {%
  set icon = 'fa-calendar-minus' %} {% elif 'announcement' in title_lower %} {%
  set target_url = url_for('intern_announcements') %} {% set icon =
  'fa-bullhorn' %} {% else %} {% set target_url = '#' %} {% set icon = 'fa-bell'
  %} {% endif %}

  <a
    href="{{ target_url }}"
    class="glass-panel notif-card {% if not notification.is_read %}unread{% endif %}"
  >
    <div class="notif-icon-box">
      <i class="fas {{ icon }}"></i>
    </div>

    <div class="notif-content">
      <h4 class="notif-title">{{ notification.title }}</h4>
      <p class="notif-message">{{ notification.message }}</p>
      <div class="notif-time">
        <i class="far fa-clock"></i>
        {{ notification.created_at.split()[0] if notification.created_at else
        'Just now' }}
        <span style="margin-left: 10px; color: var(--primary)"
          >Click to view
          <i class="fas fa-chevron-right" style="font-size: 0.7rem"></i
        ></span>
      </div>
    </div>
  </a>
  {% endfor %} {% else %}
  <div class="glass-panel empty-notif">
    <i
      class="fas fa-bell-slash"
      style="
        font-size: 3rem;
        color: var(--glass-border);
        margin-bottom: 1rem;
        display: block;
      "
    ></i>
    <p style="color: var(--text-muted)">Your inbox is empty.</p>
  </div>
  {% endif %}
</div>
{% endblock %}
