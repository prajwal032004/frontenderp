{% extends "admin_base.html" %} {% block title %}Pending Approvals{% endblock %}
{% block page_title %}Registration Requests{% endblock %} {% block content %}
<div
  style="
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 1.5rem;
  "
>
  {% if pending_interns %} {% for user in pending_interns %}
  <div
    class="glass-panel"
    style="padding: 1.5rem; display: flex; flex-direction: column; gap: 1rem"
  >
    <div style="display: flex; align-items: start; gap: 1rem">
      <img
        src="{{ user.photo_url or 'https://ui-avatars.com/api/?name=' + user.full_name }}"
        style="width: 60px; height: 60px; border-radius: 12px"
      />
      <div>
        <h3 style="font-size: 1.1rem; margin: 0">{{ user.full_name }}</h3>
        <p style="color: var(--text-muted); font-size: 0.9rem; margin-top: 5px">
          {{ user.email }}
        </p>
        <span
          style="
            display: inline-block;
            margin-top: 5px;
            background: rgba(255, 255, 255, 0.1);
            font-size: 0.75rem;
            padding: 2px 8px;
            border-radius: 4px;
          "
          >{{ user.department }}</span
        >
      </div>
    </div>

    <div
      style="
        background: rgba(0, 0, 0, 0.2);
        padding: 10px;
        border-radius: 8px;
        font-size: 0.9rem;
      "
    >
      <div
        style="
          display: flex;
          justify-content: space-between;
          margin-bottom: 5px;
        "
      >
        <span style="color: var(--text-muted)">USN:</span>
        <span>{{ user.usn }}</span>
      </div>
      <div style="display: flex; justify-content: space-between">
        <span style="color: var(--text-muted)">Phone:</span>
        <span>{{ user.phone }}</span>
      </div>
    </div>

    <div
      style="
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1rem;
        margin-top: auto;
      "
    >
      <form
        action="{{ url_for('reject_intern', user_id=user.id) }}"
        method="POST"
      >
        <button
          type="submit"
          class="btn"
          style="
            width: 100%;
            background: transparent;
            border: 1px solid var(--danger);
            color: var(--danger);
          "
        >
          Reject
        </button>
      </form>
      <form
        action="{{ url_for('approve_intern', user_id=user.id) }}"
        method="POST"
      >
        <button
          type="submit"
          class="btn"
          style="width: 100%; background: var(--success); color: white"
        >
          Approve
        </button>
      </form>
    </div>
  </div>
  {% endfor %} {% else %}
  <div
    style="
      grid-column: 1 / -1;
      text-align: center;
      padding: 4rem;
      color: var(--text-muted);
    "
  >
    <i
      class="fas fa-check-double"
      style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.5"
    ></i>
    <p>All caught up! No pending approvals.</p>
  </div>
  {% endif %}
</div>
{% endblock %}
